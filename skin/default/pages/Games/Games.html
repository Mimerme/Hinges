<!DOCTYPE html>
<html>
  <head>
    <script src="../../libs/jquery.js"></script>
    <!-- Site Properities -->
    <title>Hinges Client</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="stylesheet" type="text/css" href="../../libs/semantic/dist/semantic.css">
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.js"></script>
    <!-- Used with Tab History !-->
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery.address/1.6/jquery.address.min.js"></script>
    <script src="../../libs/semantic/dist/semantic.js"></script>
  </head>
  <body>
    <h1 class="center-align">
      <div class="ui button right add-game">
        Add Game
      </div>
    </h1>
    <div class="ui cards">
      <div class="ui card card-padding">
        <div class="content">
          <h2 class="center-align">[GAME_NAME]</h2>
          <div class="ui medium image game">
            <div class="ui dimmer">
              <div class="content">
                <div class="center">
                  <div class="ui small primary button" class="playGame" onclick="runGame('C:/Windows/System32/calc.exe')">Play</div>
                </div>
              </div>
            </div>
            <img src= "http://sensesofcinema.com/wp-content/themes/valenti/library/images/thumbnail-360x240.png"/>
          </div>
        </div>
        <div class="extended-content">
          <p class="extended-text">Last Played : [LAST_PLAY]</p>
          <p class="extended-text">Played For : [HOURS_PLAYED]</p>
        </div>
      </div>
    </div>
  </body>
  <script src="game_screen.js"></script>
  <script>
    //semantic-UI requires that all content be pre-loaded
    //to allow dimmable objects

    global.loadGames();
    var list  = global.gameList;

    for(var title in global.gameList){
      console.log("title");
      if (!list.hasOwnProperty(title)) {
        continue;
      }
      appendGame(title, list[title]);
      console.log(title);
      console.log(list[title]);
    }

    var os = require('os');
    $(document).ready(function(){
      console.log("Finished loading Games page");
    });

    function appendGame(name, path){
      $('.cards').append('<div class="ui card card-padding">\
        <div class="content">\
          <h2 class="center-align">' + name + '</h2>\
          <div class="ui medium image game dimmable">\
            <div class="ui dimmer transition hidden">\
              <div class="content">\
                <div class="center">\
                  <div class="ui small primary button" onclick="runGame(\'' +  path  + '\')">Play</div>\
                </div>\
              </div>\
            </div>\
            <img src="http://sensesofcinema.com/wp-content/themes/valenti/library/images/thumbnail-360x240.png">\
          </div>\
        </div>\
        <div class="extended-content">\
          <p class="extended-text">Last Played : [LAST_PLAY]</p>\
          <p class="extended-text">Played For : [HOURS_PLAYED]</p>\
        </div>\
      </div>');
    }

    function runGame(path){
      global.runApp(path);
    }

    $('.game').dimmer({
      on: 'hover'
    });

    $('.add-game').click(function(){
      global.newWindow("pages/Games/popouts/addgame.html", 500, 400, "Add Game", null);
    });
  </script>
</html>
